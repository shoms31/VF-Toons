<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <meta charset="utf-8">
	<title>Pipi reader</title>
	<style type="text/css">            
        @font-face {
          font-family: Montserrat;
          src: url(Fonts/Montserrat-Medium.ttf);
        }
        :root {
            --background:#fc5c65;
            --background2:#eb3b5a;
            --start-button-size:50px;
            --legend-button-size:30px;
			--top:15px;
        }
        *{
            padding: 0;
            margin: 0;
            font-family: Montserrat !important;
        }
        html {
        	position: relative;
            height: 100vh;
            width: 100vw;
            overflow: hidden !important;
            background:var(--background);
        }
            body {
                height: 100vh;
                width: 100vw;
                overflow: hidden !important;
                background:var(--background);
            }

        #splashscreen {
            z-index: 6;
            position: absolute;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: var(--background2);
            background-size: cover;
            background-position: center;
            width: 100%;
            height: 100%;
            overflow: hidden !important;
            opacity: 1;
        }
        	#splash_back {
           	 	position: absolute;
	            background:url(img/splash_back.png) no-repeat;
	            background-size: cover;
	            background-position: center;
	            width: 100%;
	            height: 100%;
            	z-index: -1;
	            opacity: 0;
            	overflow: hidden !important;
	            animation: appear_upp 1.5s 1.5s forwards;
        	}
            #main {
                z-index: 1;
                position: absolute;
                display: flex;
                flex-direction: column;
                justify-content: flex-start;
                width: 100%;
	            overflow: hidden;
                height: 100%;
                background: rgb(255 251 238);
                background-size: cover;
                background-position: center;
            }
            @keyframes appear2 {
                0% {opacity: 0;transform: scale(2.3,2.3) translateZ(0) rotate(80deg) translate(0%,-100%);}
                100% {opacity: 1;transform: scale(1,1) translateZ(0) rotate(0deg) translate(0%,0%);}
            }
            @keyframes zoomzoom {
                0% {transform: scale(1,1) translateZ(0);}
                50% {transform: scale(1.02,1.02) translateZ(0);}
                100% {transform: scale(1,1) translateZ(0);}
            }
            @keyframes struggle {
                0% {transform: scale(0.95,0.95) translateZ(0);filter: brightness(1);}
                5% {transform: scale(1.03,1.03);filter: brightness(1.2);}
                6% {transform: scale(1.05,1.05);filter: brightness(1.2);}
                100% {transform: scale(0.95,0.95) translateZ(0);filter: brightness(1);}
            }
            @keyframes fade {
                0% {opacity: 1;}
                100% {opacity: 0;}
            }
            @keyframes appear {
                0% {opacity: 0;}
                100% {opacity: 1;}
            }
            @keyframes appear_up {
                0% {opacity: 0;bottom:-50px;}
                100% {opacity: 1;bottom:5px;}
            }
            @keyframes appear_upp {
                0% {opacity: 0;bottom:-60px;}
                100% {opacity: 1;bottom:0px;}
            }
            @keyframes disappear_up {
                0% {opacity: 1;bottom:5px;}
                100% {opacity: 0;bottom:30px;}
            }
            @keyframes appear3 {
                0% {opacity: 0;transform:translate(0,50px) translateZ(0);}
                100% {opacity: 0.7;transform:translate(0,0);}
            }
            @keyframes main_come_in {
                0% {opacity: 0;transform: translateZ(0) translate(0px,200px);}
                100% {opacity: 1;transform: translateZ(0) translate(0px,0px);}
            }
                @keyframes show_bundles {
                    0% {transform: translate(-50%,100%) translateZ(0);}
                    100% {transform: translateZ(0) translate(-50%,0%);}
                }
                @keyframes hide_bundles {
                    0% {transform: translate(-50%,0%) translateZ(0);}
                    100% {transform: translateZ(0) translate(-50%,100%);}
                }
            .start {
                opacity: 0;
                border-radius: 50%;
                padding: 15px;
                height:var(--start-button-size); 
                width:var(--start-button-size);
                border:4px rgba(255 255 255 / 4%) solid;
                background-color: rgba(255,255,255,0.15);
                outline: none !important;
                animation: appear2 1s 0.5s forwards, struggle 2s 1.5s infinite;
            }
                        .bigButton  {
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            height: 80px;
                            width: 100%;
                            background: var(--background);
                            border: none;
                            border-radius: 5px;
                            color: white;
                            margin: 3% auto 3% auto;
                            font-weight: bold;
                            font-size: 21px;
                            transition: background .03s linear;
                            outline: none !important;
                            box-shadow: 0px 6px 1px var(--background2);
                        }
                            .bigButton i {
                                height: 100%;
                                width: 30%;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                background: rgba(255,0,0,0.1);
                            }
                            .bigButton i img {
                                height: 40px;
                                width: 40px;
                                filter: brightness(1.2) grayscale(0);
                            }
                            .bigButton b {
                                width: 70%;
                                text-align: center;
                                margin: 0px 0px 0px 9px;
                            }
                            .bigButton span {
                                width: 100%;
                            }
                            .bigButton:active, .bigButton button:focus  {
                                background: var(--background2);
                            }
                        
		#chapitres {
			position: absolute;
			bottom: 0%;
		    left: 50%;
		    width: 85%;
		    height: 70%;
		    padding: 10px;
		    transform: translate(-50%,110%);
		    display: flex;
		    flex-direction: column;
		    justify-content: space-between;
		    background: white;
		    z-index: 6;
		    border-top-left-radius: 4px;
		    border-top-right-radius: 4px;
		    box-shadow: 0px 0px 20px rgb(1 1 1 / 20%);
		}
                    @keyframes appear_up {
                        0% {opacity: 0;bottom:-50px;}
                        100% {opacity: 1;bottom:5px;}
                    }
                    @keyframes disappear_up {
                        0% {opacity: 1;bottom:5px;}
                        100% {opacity: 0;bottom:30px;}
                    }
			#chapitres u {
			    position: fixed;
			    width: 30px;
			    height: 30px;
			    display: flex;
			    top: -10px;
			    right: 0px;
			    background: none;
			    color: white;
			    align-items: center;
			    justify-content: center;
			    text-decoration: none;
			    transition: all .1s ease;
			    width: 0;
			    height: 0;
			    border-style: solid;
			    border-width: 20px 15px 0 15px;
			    border-color: var(--background2) transparent transparent transparent;
			}
				#chapitres u:hover {
					cursor: pointer;
					filter: brightness(1.5);
				}
			#infos_webtoon {
				height: 45%;
				display: flex;
				justify-content: space-between;
			}
				#infos_webtoon img {
					max-height: 150px;
					height: 150px;
					max-width: 50%;
					object-fit: cover;
				}

				#metas_webtoon {
					width: -webkit-fill-available;
					display: flex;
					flex-direction: column;
					padding-left: 15px;
				}
				#metas_webtoon b {
					margin-bottom: 10px;
    				font-size: 15px;
				}
				#metas_webtoon i {
					max-height: calc(100% - 20px);
				    overflow: auto;
				    font-size: 12px;
				}
			#liste_chapitres {
				height: 45%;
				display: flex;
				flex-direction: column;
				overflow: auto !important;
				box-shadow: 0px 0px 0px 10px rgb(1 1 1 / 2%) inset;
				padding: 5px;
				scroll-behavior: smooth;
			}
				#liste_chapitres span {
					width: calc(100% - 20px - 10px);
				    padding: 10px;
				    display: flex;
				    justify-content: space-between;
				    border: 1px rgba(1 1 1 / 10%) solid;
				    border-left: 5px silver solid;
				    margin: 2px auto 2px auto;
				    transition: all .1s linear;
				    font-size: 13px;
				    background: white;
				}
					#liste_chapitres span:hover {
						cursor: pointer;
						border: 1px var(--background2) solid;
					}
					#liste_chapitres span b {
						font-weight: normal;
					}
					#liste_chapitres span a {
						font-weight: normal;
						height: 15px;
						width: 15px;
						color: var(--main-color2);
					}
		#div_pdf_chapitre {
			position: absolute;
			display: flex;
			flex-direction: column;
			top: 50%;
			left: 50%;
			width: 100vw;
			height: 100vh;
			padding: 0px;
			transform: translate(100%,-50%);
			overflow: visible;
			z-index: 2;
			transition: background 1s ease;
			background-color: #BD0052;
			background-image: linear-gradient(to bottom, #A3004E 0%, #BD0052 100%);
		}
            ::-webkit-scrollbar {
            	width: 5px;
            	height: 5px;
            	padding: 10px;
                background: rgba(247, 0, 111, 0.3);
            }
            ::-webkit-scrollbar-thumb {
            	width: 90%;
            	border-radius: 4px;
                background: rgba(247, 0, 111, 1);
            }

			#pdf_chapitre {
				position: relative;
				display: flex;
				flex-direction: column;
				margin-left: auto;
				margin-right: auto;
				width: 100%;
				height: 100%;
				padding: 0px;
				overflow-y: auto;
				background-repeat: no-repeat;
				background-image: url(img/loader.gif);
				background-color: white;
				background-position: 50%;
    			background-size: 90px 90px;
    			scroll-behavior: smooth;
			}
				#pdf_chapitre::-webkit-scrollbar {
					display: none;
				}
				@keyframes fade_in {
					0% {opacity: 0}
					100% {opacity: 1}
				}
				@keyframes fade_inn {
					0% {opacity: 0}
					100% {opacity: 0.1}
				}
				@keyframes fade_out {
					0% {opacity: 1}
					100% {opacity: 0}
				}
				#controls {
					position: absolute;
					display: flex;
					justify-content: space-between;
					align-items: center;
					height: 40px;
					width: 70%;
					background: #A00048;
					left: 50%;
					bottom: 4%;
					z-index: 2;
					padding: 5px;
					transform: translate(-50%,0%);
					opacity: 0;
					overflow: visible !important;
					border-radius: 50px;
				}
		canvas {
			display: block;
			width: 100%;
			border: none;
			margin:0px;
			transition: all .08s linear;
			background-color: transparent;
			transform: translateZ(0);
		}
		.menu_nav_btn {
		    display: flex;
		    align-items: center;
		    justify-content: center;
		    padding: 5px;
		    width: 40px;
		    height: 100%;
		    border: none;
		    background: rgba(255,255,255,0.25);
		    color: white;
		    font-weight: bolder;
		    font-size: 20px;
		    border-radius: 50px;
		    transition: all .2s ease;
			z-index: -2;
			outline: none;
		}
			.menu_nav_btn:hover {
				cursor: pointer;
				filter: brightness(2);
		    	background: rgba(255,255,255,0.45);
				transform: translate(0px,-7px) scale(1.05,1.05);
				border: 4px solid #A00048;
			}
		.nav_btn {
		    height: 50px;
		    width: 50px;
		    padding: 10px;
		    border-radius: 50%;
		    border: none;
		    background: #BD0052;
		    color: white;
		    font-weight: bolder;
		    font-size: 20px;
		    margin: 0px 5px 0px 5px;
		    transform: scale(1.2);
		    border: 4px solid rgba(235, 19, 130,0.3);
		    display: inline-flex;
		    outline: none;
		    align-items: center;
		    justify-content: center;
		    transition: opacity .2s ease-out;
		}
		@keyframes left_swipe_chapter {
			0% {transform: translate(-100%,-50%);}
			100% {transform: translate(-50%,-50%);}
		}
		@keyframes right_swipe_chapter {
			0% {transform: translate(100%,-50%);}
			100% {transform: translate(-50%,-50%);}
		}
		@keyframes left_swipe_chapter_out {
			0% {transform: translate(-50%,-50%);}
			100% {transform: translate(-150%,-50%);}
		}
		@keyframes right_swipe_chapter_out {
			0% {transform: translate(-50%,-50%);}
			100% {transform: translate(150%,-50%);}
		}
				@keyframes fade_in {
					0% {opacity: 0}
					100% {opacity: 1}
				}
				@keyframes fade_inn {
					0% {opacity: 0}
					100% {opacity: 0.1}
				}
				@keyframes fade_out {
					0% {opacity: 1}
					100% {opacity: 0}
				}
		@keyframes up_info_webtoon {
			0% {transform: translate(-50%,110%);}
			100% {transform: translate(-50%,0%);}
		}
		@keyframes down_info_webtoon {
			0% {transform: translate(-50%,0%);}
			100% {transform: translate(-50%,110%);}
		}

                #link_list {
                    position: absolute;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    bottom: 3%;
                    width: 90%;
                    height: 40px;
                    overflow-x: auto;
                    overflow-y: hidden;
                    opacity: 0;
                    animation: appear 1s 2s forwards;
                    color: rgba(255, 255, 255, 0.6);
                    font-size: 18px;
                    font-weight: bold;
                    text-align: center;
                }
                    #link_list img {
                        filter: brightness(0) invert(1) opacity(0.6);
                        width: 30px;
                        height: 30px;
                        margin: 0px 3px 0px 3px;
                    }
            #main > div {
            }
            #liste_comics {
            	columns: 2;
            	column-gap: 10px;
			    overflow: auto;
			    padding: 10px;
			    width: 100%;
			    padding-top: 4%;
			    height: calc(100% - 4%);
			    scroll-behavior: smooth;
            }
	            #liste_comics img {
	            	max-width: 100%;
	            	max-height: calc(13em - 55px);
	            	object-fit: cover;
	            }
            	#liste_comics > div, #blocs_lus > div {
            		display: inline-flex;
					flex-direction: column;
					break-inside: avoid;
					width: 100%;
					height: fit-content;
					min-height: fit-content;
					margin-bottom: 10px;
					background: white;
					border-radius: 5px;
    				box-shadow: 0px 4px 7px rgb(1 1 1 / 10%);
    				opacity: 0;
    				position: relative;
            	}
            	#liste_comics > div:nth-child(2), #liste_comics > div:nth-child(1), #liste_comics > div:nth-child(3), #liste_comics > div:nth-child(4) {
					width: 100%;
            	}
            	#liste_comics > div:nth-last-child(-n+2) {
					width: calc(100% - 5px);
            	}
            		#liste_comics > div span {
            			height: auto;
						break-inside: avoid;
            			display: flex;
            			flex-direction: column;
            			padding: 7px;
            		}
            			#liste_comics > div span b {

            			}
            			#liste_comics > div span i {
            				margin: 3% 0% 4% 0%;
						    color: grey;
						    font-size: 13px;
            			}
            #entete {
            	display: flex;
            	align-items: center;
            	justify-content: space-between;
            	height: 15%;
            	background: var(--background2);
            	transition: all .1s ease-out;
            }
	            #entete button {
	            	background-repeat: no-repeat;
	            	background-size: 50% 50%;
	            	background-position: center;
	            	transition: all .05s ease-out;
	            	outline: none;
	            }
		            #entete button:hover {
		            	background-color: var(--background);
		            	box-shadow: 0px 0px 10px rgba(1 1 1 / 25%);
		            }
            #entete::after {
            	content: '';
			    position: absolute;
			    left: 50%;
			    transform: translate(-50%, 10px);
			    z-index: -1;
			    background: var(--background2);
			    height: 15%;
			    width: 150%;
			    border-radius: 50%;
            }
            	.search {
            		display: flex;
            		align-items: center;
            		justify-content: space-between;
            		height: 30px;
				    width: 60%;
				    margin: 4%;
				    background: white;
				    border-radius: 40px;
				    padding: 10px;
            	}
            		.search input {
            			width: calc(100% - 32px);
					    height: 30px;
					    border: none;
					    outline: none;
    					padding-left: 10px;
            		}
            		.search button {
						width: 30px;
					    height: 30px;
					    border-radius: 50%;
					    border: none;
					    background: var(--background2);
					    color: white;
					    background-image: url(img/search.png);
            		}
            	.filtres {
            		display: flex;
				    align-items: center;
				    justify-content: space-around;
				    height: 25px;
				    width: 35%;
				    margin: 4%;
				    background: rgba(1,1,1,0.12);
				    border-radius: 30px;
				    padding: 10px;
            	}
            		.filtres button {
            			display: flex;
					    align-items: center;
					    justify-content: center;
					    height: 25px;
					    width: 25px;
					    border-radius: 50%;
					    padding: 5px;
					    background: var(--background2);
					    border: none;
					    color: white;
					    overflow: hidden;
					    box-shadow: 0px 0px 10px rgb(1 1 1 / 5%);
				    	outline: none;
            		}
            		.filtres button:nth-child(1) {
					    background-image: url(img/tout.png);
					}
            		.filtres button:nth-child(2) {
					    background-image: url(img/langue.png);
					}
            		.filtres button:nth-child(3) {
					    background-image: url(img/traducteur.png);
					}
            	#upload_btn {
            		position: absolute;
				    height: 60px;
				    width: 60px;
				    border-radius: 50%;
				    bottom: 4%;
				    left: 50%;
				    transform: translate(-50%, 0%);
				    border: none;
				    background: var(--background2);
				    color: white;
				    font-weight: bolder;
				    font-size: 2.5em;
				    box-shadow: 0px 10px 5px rgb(1 1 1 / 10%);
				    z-index: 1;
				    outline: none;
				    transition: all .1s ease-out;
            	}
            		#upload_btn:active {
            			transform:translate(-50%,10px); 
            		}
            	#upload_btn::before {
	            	content: '';
				    position: absolute;
				    top: 50%;
				    left: 50%;
				    transform: translate(-50%, 10px);
				    z-index: -1;
				    background: rgba(252, 92, 101,0.5);
				    height: 180%;
				    width: 280%;
				    border-radius: 50%;
            	}
            	#sub_metas {
            		height: 20%;
				    max-width: 100%;
				    width: 100%;
				    display: flex;
				    overflow-x: auto;
				    overflow-y: hidden;
				    align-items: center;
				    justify-content: flex-start;
            	}

		            #sub_metas::-webkit-scrollbar {
		            	display: none;
		            }

            		#sub_metas b {
            			border: 1px black solid;
					    padding: 8px;
					    align-items: center;
					    display: flex;
					    font-size: 12px;
					    margin: 2px;
					    border-radius: 25px;
					    font-weight: lighter;
					    color: black;
					    padding-left: 30px;
					    background-size: 15px 15px;
					    background-position: 10px 50%;
					    background-image: url(img/langue.png);
					    background-repeat: no-repeat;
					    opacity: 0.5;
					    filter: brightness(0.5);
					    white-space: nowrap;
            		}
            			#sub_metas b:nth-child(1) {
					    	background-image: url(img/auteur.png);
            			}
            			#sub_metas b:nth-child(2) {
					    	background-image: url(img/dessinateur.png);
            			}
            			#sub_metas b:nth-child(3) {
					    	background-image: url(img/en_cours.png);
            			}
            			#sub_metas b:nth-child(4) {
					    	background-image: url(img/langue.png);
            			}

                    .notif {
                        position: absolute;
                        left: 5px;
                        bottom: -50px;
                        opacity: 0;
                        border-radius: 3px;
                        padding: 10px;
                        font-size: 15px;
                        color: white;
                        background: #2c3e50;
                        text-transform: none;
                        z-index: 16;
                        animation: appear_up .8s forwards, disappear_up 1s 4s forwards;
                    }
                #supprimer {
				    height: 45px;
				    display: flex;
				    margin: 1%;
				    border-radius: 40px;
				    justify-content: center;
				    align-items: center;
				    background: var(--background2);
				    color: white;
				    font-weight: bold;
				    font-size: 14px;
				    opacity: 0.2;
				    transition: all .2s ease-out;
                }
                        #bloquer, #lapub {
                            position: absolute;
                            width: 100vw;
                            height: 100vh;
                            background-color: rgba(1,1,1,0.8);
                            display: flex;
                            flex-direction: column;
                            align-items: center;
                            justify-content: center;
                            color: white;
                            z-index: 30;
                        }
                        #lapub {
                            background-color: rgba(235, 59, 90,0.9);
                        }
                            #bloquer img, #lapub img {
                                height: 70px;
                                margin-bottom: 15px;
                            }
                            #bloquer b, #lapub b {
                                margin-bottom: 5px;
                                font-size: 14px;
                            }
                            #lapub b {
                                color: yellow;
                            }
                            #bloquer i, #lapub i {
                                text-transform: none;
                                margin-bottom: 13px;
                                text-align: center;
                                margin-left: auto;
                                margin-right: auto;
                                font-size: 14px;
                                width: 80%;
                            }
                    .notif_up {
                        position: absolute;
                        left: 50%;
                        transform: translate(-50%,0%);
                        top: var(--top);
                        opacity: 0;
                        border-radius: 3px;
                        padding: 10px;
                        color: yellow;
                        background: #2c3e50;
                        z-index: 5;
                        display: table;
                        text-align: center;
                        animation: appear_up .5s forwards, disappear_up .5s 2.5s forwards;
                    }
                   #qualite {
                   		display: flex;
					    justify-content: space-between;
					    align-items: center;
					    position: absolute;
					    z-index: 1;
					    padding: 5px;
					    background: rgba(1,1,1,0.2);
					    border-radius: 20px;
					    top: 50%;
					    transform: translate(calc(-45% + 10px), -50%) rotate(270deg);
					    opacity: 0;
                   }
                   	#qualite b {
                   		color: white;
					    transform: rotate(-270deg);
					    padding: 3px;
                   	}
                   	#qualite input {
  						-webkit-appearance: none;
					    height: 7px;
					    background: #B53471;
					    outline: none;
					    opacity: 0.9;
					    border-radius: 10px;
					    transition: opacity .2s;
                   	}
						#qualite input:hover {
						  opacity: 1;
						}
                   	#qualite input::-webkit-slider-runnable-track {
					    border-radius: 10px;
					}
					/* le curseur */
					#qualite input::-webkit-slider-thumb {
					  	-webkit-appearance: none;       /* également nécessaire sur le curseur */
					  	background: var(--background);       /* pris en compte sur Webkit only */
					  	border-radius: 50%;
					  	width: 16px;
					  	height: 16px;
					}
					#telecharger {
					    position: absolute;
					    top: calc(75% - 30px);
					    width: 30px;
					    height: 30px;
					    padding: 15px;
					    left: 5px;
					    color: white;
					    font-weight: bolder;
					    background: #BD0052;
					    z-index: 1;
					    opacity: 0;
					    border-radius: 50%;
					    display: flex;
					    justify-content: center;
					    align-items: center;
					    text-align: center;
					    border: none;
					    transition: all .07s linear;
					    font-size: 16px;
					    box-shadow: 0px 0px 8px rgba(1 1 1 / 30%);
					}
						#telecharger:hover {
					    	background: var(--background2);
					    	box-shadow: 0px 0px 4px rgba(1 1 1 / 10%);
						}
					#lecture, #timeur {
					    position: absolute;
					    top: 25%;
					    width: 30px;
					    height: 30px;
					    padding: 15px;
					    left: 5px;
					    color: white;
					    font-weight: bolder;
					    background: #BD0052;
					    z-index: 1;
					    opacity: 0;
					    border-radius: 50%;
					    display: flex;
					    justify-content: center;
					    align-items: center;
					    text-align: center;
					    border: none;
					    transition: all .07s linear;
					    font-size: 16px;
					    box-shadow: 0px 0px 8px rgba(1 1 1 / 30%);
						z-index: 2;
					}
						#lecture:hover {
					    	background: var(--background2);
					    	box-shadow: 0px 0px 4px rgba(1 1 1 / 10%);
						}
						#timeur {
							background: rgba(1 1 1 / 80%);
							z-index: 1;
					    	box-shadow: none;
						}
				#corps {
					display: flex;
				    max-width: 100%;
				    padding-top: calc(5%);
				    height: calc(85%);
				    overflow-x: visible;
				    z-index: -2;
				}
					#derniers_lus {
						width: calc(40% - 10px);
					    height: calc(100% - 15%);
					    background-color: var(--background2);
					    padding: 10px;
					    margin-top: -5%;
					    display: flex;
					    flex-direction: column;
					    position: absolute;
					    z-index: -1;
					    bottom: 0%;
					    box-shadow: 5px 0px 10px rgb(1 1 1 / 25%);
    					transition: transform 0.4s ease;
					    transform : translate(-120%, 0%);
					}
						#derniers_lus h3 {
							color: white;
						    margin-bottom: 7%;
						    padding: 8px;
						    background: rgba(1 1 1 / 20%);
						    border-radius: 5px;
						    box-shadow: 5px 0px 3px rgb(1 1 1 / 10%);
						    font-size: 15px;
						}
						#blocs_lus {
							display: flex;
							flex-direction: column;
							height: calc(100% - 30px);
							overflow: auto;
						}
							#blocs_lus > div {
								background: none;
								box-shadow: none;
							}
							#blocs_lus > div > span {
								padding: 5px;
								display: flex;
    							flex-direction: column;
    							color: white;
    							font-size: 13px;
    							text-align: center;
							}
			            #blocs_lus::-webkit-scrollbar {
			            	width: 0px;
			            	padding: 0px;
			                background: rgba(255, 255, 255, 0.1);
			            }

			            #blocs_lus::-webkit-scrollbar-thumb {
			            	width: 100%;
			            	border-radius: 4px;
			                background: white;
			            }
			#specials {
				display: flex;
			    position: absolute;
			    z-index: 2;
			    left: 50%;
			    align-items: center;
			    justify-content: space-between;
			    width: 125px;
			}
				#specials button {
					background-repeat: no-repeat;
				    background-size: 50% 50%;
				    background-position: center;
				    background-color: var(--background);
				    transition: all .05s ease-out;
				    outline: none;
				    height: 35px;
				    width: 35px;
				    border: none;
				    border-radius: 50%;
				    color: white;
				    border: 3px solid var(--background2);
    				box-shadow: 0px 5px 10px rgb(1 1 1 / 20%);
				}
				#specials button:nth-child(1) {
				    background-image: url(img/history.png);
				}
				#specials button:nth-child(3) {
				    background-image: url(img/password.png);
				}
				#specials button:nth-child(2) {
				    background-image: url(img/hasard.png);
				    height: 41px;
				    width: 41px;
				}
				.ii {
					font-size: 12px;
    				color: white;
				}
				#pass_div {
					position: absolute;
				    z-index: 2;
				    bottom: 0%;
				    height: 98%;
				    width: 350%;
				    left: 50%;
				    transform: translate(-50%, 100%);
				    background-color: rgb(255 251 238);
				    border-top-left-radius: 50%;
				    border-top-right-radius: 50%;
				    transition: transform 0.4s ease-out;
				}
					#div_pass {
						margin: auto;
					    margin-top: calc(38.5vh - 10px);
					    height: 23vh;
					    width: 60vw;
					    padding: 10px;
					    display: flex;
					    flex-direction: column;
					    justify-content: space-between;
					    background-color: rgba(255 255 255 / 50%);
					    border-radius: 10px;
					}
						#div_pass h4 {
							font-size: 16px;
    						color: var(--background2);
						}
						#div_pass h5 {
							color: grey;
    						font-weight: lighter;
						}
						#div_pass input {
							padding: 10px;
						    border: none;
						    border-radius: 5px;
						    margin-top: 10px;
						}
						#div_pass button {
							padding: 10px;
						    width: 100%;
						    border: none;
						    background: var(--background);
						    color: white;
						    border-radius: 5px;
						}
	</style>
    <script src="cordova.js"></script>
</head>
<body id="body" onload="onLoad()" onclick="bloquer('bloquer',1,0)" oncontextmenu="return false" onselectstart="return false" ondragstart="return false">
	<div id="splashscreen">
            <img src="img/book.png" class="start" id="start_btn" onclick="start_app()">
            <div id="splash_back"></div>
    </div>
    <div id="pass_div">
    	<div id="div_pass">
    		<h4>Entre ton mot de passe</h4>
    		<h5>COPIE-LE ET GARDE-LE! Parce qu'il n'y aura PAS moyen de le restaurer ou de le modifier sur l'appli</h5>
    		<input type="text" id="pwd_input" placeholder="Écris ton mot de passe">
    		<button onclick="save_pwd()">Sauvegarder</button>
    	</div>
    </div>
    <div id="main">
		<div id="specials">
			<button onclick="historique()"></button>
			<button onclick="hasard()"></button>
			<button onclick="lock()"></button>
		</div>
    	<div id="derniers_lus">
	    	<h3>Tu lisais...</h3>
	    	<div id="blocs_lus">
	    	</div>
	    </div>
    	<button id="upload_btn" onclick="start_upload()">+</button>
    	<div id="entete">
    		<span class="search">
    			<input type="text" id="terme" placeholder="Cherche un truc?">
    			<button onclick="chercher(this)"></button>
    		</span>
    		<span class="filtres">
    			<button onclick="filtre_statut(this)"></button>
    			<button onclick="show_all_comics(3, [])"></button>
    			<button onclick="show_all_comics(5, [])"></button>
    		</span>
    	</div>
    	<div id="corps">
	    	<div id="liste_comics">
	    	</div>
    	</div>
		<div id="chapitres">
			<u onclick="down_infos_div(this.parentNode,8)"></u>
			<div id="infos_webtoon">
				<img>
				<span id="metas_webtoon">
					<b></b>
					<i></i>
				</span>
			</div>
			<span id="sub_metas">
				<b></b><b></b><b></b><b></b>
			</span>
			<div id="liste_chapitres">
			</div>
			<span id="supprimer">Supprimer</span>
		</div>
		<div id="div_pdf_chapitre">
			<div id="qualite">
				<b>SD</b>
				<input type="range" id="quali" onchange="changer_quali(this.value,this)" value="2" min="1" max="3" step="1">
				<b>HD</b>
			</div>
			<button id="lecture" onclick="lecture(this)">&#9654;</button>
			<button id="timeur" onclick="changer_timeur(this)">3</button>
			<button id="telecharger">&#8595;</button>
			<div id="controls" onclick="show_ctrls()" onmouseleave="fade(this, 9, 'out')">
				<button onclick="swipe_out(this.parentNode.parentNode,7)" class="menu_nav_btn">&#8592;</button>
				<span id="navigation"></span>
				<button onclick="up_infos_div(document.getElementById('chapitres'),4)" class="menu_nav_btn">&#8801;</button>
			</div>
			<div id="pdf_chapitre" onclick="show_ctrls();notifier(localStorage.chapitre_actuel)" onscroll="end_ctrl(this)">
				<canvas id="pipi"></canvas>
			</div>
		</div>
		<input type="file" style="display: none;" name="inputfile" id="inputfile" multiple="multiple">
	</div>
    <script type="text/javascript">
    		var delim = '--%--%--';
    		var chapitres_lus = [];
    		var histo = 0;
            var interstitial_options={
                interstitialid:"826886747918517_826887231251802",
                isTesting:false,
            };
            var mopub_ad_units = {
				android : {
					interstitial:"ae39d7a890c64551aad6de341988baa9",
				}
			};
			var adid = mopub_ad_units.android;

            function unlock() {
            	localStorage.establodo = '0';
            	_$('pass_div').style.transform = "translate(-50%, 100%)";
            }

            function lock() {
            	if (!localStorage.elloulou) {
            		let divi = document.createElement('div');
            		divi.id = 'pass_div';
            		divi.innerHTML = "<div id='pass_div'> <div id='div_pass'> <h4>Entre ton mot de passe</h4> <h5>COPIE-LE ET GARDE-LE! Parce qu'il n'y aura PAS moyen de le restaurer ou de le modifier sur l'appli</h5> <input type='text' id='pwd_input' placeholder='Écris ton mot de passe ici'> <button onclick='save_pwd()'>Sauvegarder</button> </div> </div>";
            		_$('body').appendChild(divi);
            		_$('pass_div').style.transform = "translate(-50%, 0%)";
            	}
            	else {
            		localStorage.establodo = '1';
            		let divi = _$('pass_div');
            		divi.innerHTML = "<div id='div_pass' style='height:16vh'> <h4>Entre ton mot de passe</h4><input type='password' id='pwd_input' placeholder='Écris ton mot de passe ici'> <button onclick='check_pwd()'>Valider</button> </div>";
            		_$('pass_div').style.transform = "translate(-50%, 0%)";
            	}
            }

            function save_pwd() {
            	let pwd = _$('pwd_input').value;
            	if (pwd.length != 0) {
            		localStorage.elloulou = pwd;
            		_$('pass_div').style.transform = "translate(-50%, 100%)";
            		setTimeout(()=>{
            			lock();
            		},500);
            	}
            }

            var pwd_try = 0;
            function check_pwd(argument) {
            	let pwd = _$('pwd_input').value;
            	if ((localStorage.elloulou == pwd) && (pwd_try < 5)) {
            		unlock();
            	}
            	else {
            		notif('Non non!');
            		pwd_try++;
            	}
            }

            function end_ctrl(elt) {
			  if (elt.offsetHeight + elt.scrollTop >= elt.scrollHeight) {
			  	if (ctrl_showed == 0) {
			    	show_ctrls();
			  	}
			  }
            }

            function interstitiel_fail(result)
            {
                retirer_bloc('lapub');
	            notif("Problème avec la pub!!");
            }
            function interstitiel_success(result)
            {
                //localStorage.clicked = 1;
            }

            var lecture_active = 0, timeur = 3, lire = false;
            function lecture(elt) {
            	let div_to_scroll = _$('pdf_chapitre'), timeur_div = _$('timeur');
            	if (!lecture_active) {
            		lecture_active = 1;
            		timeur_div.style.transform = "translate(0px,-"+elt.offsetHeight+"px)";
            		elt.style.background = "var(--background2)";
            		elt.innerHTML = "||";
            		lire = setInterval(()=>{
            			//console.log('lecture');
            			if (div_to_scroll.scrollTop != div_to_scroll.scrollHeight) div_to_scroll.scrollTop = div_to_scroll.scrollTop + (parseInt(localStorage.height)/2);
            		},timeur*1000);
            	}
            	else {
            		lecture_active = 0;
            		clearInterval(lire);
            		lire = false;
            		timeur_div.style.transform = "translate(0px,0px)";
            		elt.innerHTML = "&#9654;";
            		elt.style.background = "#BD0052";
            	}
            }

            function changer_timeur(elt) {
            	let valeur_actu = parseInt(elt.innerHTML), lecturee = _$('lecture'), new_val;
            	switch(valeur_actu){
            		case 3 : new_val = 5;break;
            		case 5 : new_val = 8;break;
            		case 8 : new_val = 11;break;
            		case 11 : new_val = 15;break;
            		case 15 : new_val = 20;break;
            		case 20 : new_val = 30;break;
            		case 30 : new_val = 3;break;
            	}
            	timeur = new_val;
            	clearInterval(lire);
            	lecture(lecturee);lecture(lecturee);
            	elt.innerHTML = new_val;
            }

            function hasard() {
            	let divs = _$('liste_comics').getElementsByTagName('div'), n = divs.length;
            	let indexe = Math.round(Math.random()*(n - 1));
            	let posi = divs[indexe].offsetLeft - 10;
            	divs[indexe].click();
            	//console.log();
            	_$('liste_comics').scrollLeft = posi;
            }

		var resolution = 2;

            function changer_quali(val,elt) {
            	resolution = parseInt(val);
            	localStorage.resolution = resolution;
            }

            function set_res(argument) {
            	if (localStorage.resolution) {
            		_$('quali').value = parseInt(localStorage.resolution);
            		resolution = parseInt(localStorage.resolution);
            	}
            }

            set_res();

            function interstitiel_events(event) {
                if(event === "AdLoaded"){
                   cordova.plugins.codeplayfacebookads.showInterstitialAds("",interstitiel_success,interstitiel_fail);
                   //console.log("Intersti chargée");
                }
                else if(event === "AdClosed"){
                   retirer_bloc('lapub');
                   notif(relance[Math.round(Math.random()*(relance.length - 1))]);
                }
                else if(event === "AdDisplayed"){
                  console.log("AdDisplayed");
                }
                else if(event === "AdClicked"){
                  console.log("AdClicked");
                }
                else if(event === "AdLogged"){
                  console.log("AdLogged");
                }
            }

			var relance = ["C'est reparti!", "On y va!", "Let's Go!", "Allez on repart!", "Continuons!", "Ça y est!"];


		var _PDF_DOC,
		    _CURRENT_PAGE,
		    _TOTAL_PAGES,
		    _PAGE_RENDERING_IN_PROGRESS = 0,
		    _CANVAS;
		    // initialize and load the PDF

		var statuts = 1;
		function filtre_statut(el) {
			switch(statuts){
				case 1 : show_all_comics(4, ['Terminé']);el.style.backgroundImage='url(img/termine.png)';statuts = 2;break;
				case 2 : show_all_comics(4, ['En cours']);el.style.backgroundImage='url(img/en_cours.png)';statuts = 3;break;
				case 3 : show_all_comics(4, ['']);el.style.backgroundImage='url(img/tout.png)';statuts = 1;break;
			}
		}

		var sur = 1;
		function supprimer(elt, id) {
			switch(sur){
				case 1 : elt.style.opacity=0.6;sur = 2;break;
				case 2 : elt.style.opacity=1;sur = 3;break;
				case 3 : down_infos_div(elt.parentNode, 8);del_comic(id);setTimeout("show_all_comics(1,[])",500);sur = 1;elt.style.opacity=0.2;break;
			}
		}

		function reset_suppr(elt) {
			elt.style.opacity=0.2;
			sur = 1;
		}

		function chercher(el) {
			let terme = escapeHtml(el.previousElementSibling.value);
			show_all_comics(2, [terme,terme,terme]);
		}

		function historique() {
			if (histo) {
				_$('derniers_lus').style.transform = "translate(-120%, 0%)";
				histo = 0;
			}
			else {
				_$('derniers_lus').style.transform = "translate(0%, 0%)";
				histo = 1;
			}
		}

		var page_id = 0;
		function afficher_pages(nombre, div_id, i) {
			if(i < nombre) {
				let truc = document.createElement('canvas');
				truc.setAttribute('id', "canvasid"+(i+1));
				_$(div_id).appendChild(truc);
				showPage('canvasid'+(i+1), (i+1)).then(()=>{
					afficher_pages(nombre, div_id, i+1);
				});
			}
			else {
				bg_image(pdf_chapitre, "none");
			}
		}

            function set_bar_color(color) {
                /*if (cordova.platformId == 'android') {
                    StatusBar.backgroundColorByHexString(color);
                }*/
            }

            function start_upload() {
            	_$('inputfile').click();
            }

            function push_notif() {
            	/*cordova.plugins.notification.local.schedule({
				    title: 'Design team meeting',
				    trigger: { every: 'minute', count: 1 }
				});*/
            }

            function mopubsuccess() {
            	alert('mopub ok');
            }

            function mopubfail() {
            	alert('mopub pas ok');
            }

            async function start_app(){
            	
			/*if(MoPub) {MoPub.prepareInterstitial( {adId:adid.interstitial, autoShow:true}, mopubsuccess, mopubfail );alert('start interstitial')}
			else alert();*/
				show_lus(localStorage.lus.split(','));
                var splash = _$("splashscreen");
                if (parseInt(localStorage.establodo) == 1 ) {
                	lock();
                }
                splash.style.animation = "fade 1s forwards";
                //setTimeout(function(){_$("main").style.animation="main_come_in 1s forwards ease";},600);
                setTimeout(function(){
                    set_bar_color("#FEF9C2");
                    //_$('div_nbre_pts').style.animation = "come_down .5s forwards";
                    //_$('div_rewarded').style.animation = "come_up .5s .25s forwards";
                    //_$('div_cadeau').style.animation = "come_scale .5s 1s forwards";
                },500);
                setTimeout(function(){
                    splash.style.zIndex=-1;
                },1100);
                setTimeout(function(){
                	couche_nav++;
                    show_all_comics(1, []);
                },900);
                setTimeout(function(){
                    splash.innerHTML='';
                },1200);
            }


		var lecteur_afficher = 0, truc_en_cours = 0;
		function nombre_de_pages(fichier) {
			pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.2.228/pdf.worker.min.js';

			// Asynchronous download of PDF
			var loadingTask = pdfjsLib.getDocument({url: fichier, disableFontFace: true, disableTextLayer: true});
			loadingTask.promise.then(function(pdf) {
			  // Fetch the first page
			  let num_pages = pdf.numPages;
			  showPage(pdf, num_pages, 0).then(() => {
			  	//if (val == 22) {
			  		bg_image(pdf_chapitre, "none");
			  		supprimer_cache();
			  		reset_cache();
			  		//cordova.plugins.AppReview.requestReview();
			  		//truc_en_cours = 0;
			  	//}
			  });
			}, function (reason) {
			  // PDF loading error
			  console.error(reason);
			});
		    
		}

		//<canvas id='pipi'></canvas>
		//showPage('pipi', 1)
		async function showPage(docu, n, i) {
			  	if ((truc_en_cours == 1) || (i >= n)) {
			  		//truc_en_cours = 0;
			  		//console.log('Fin '+truc_en_cours);
			  		return;
			  	}
			  	else {
			  		//console.log('Truc en cours - '+truc_en_cours);
			  		let truc = document.createElement('canvas');
					let id_canvas = "canvasid"+(i+1);
					truc.setAttribute('id', id_canvas);
					_$('pdf_chapitre').appendChild(truc);
					  var pageNumber = i+1;
					  docu.getPage(pageNumber).then((page)=> {
					    var scale = resolution * (parseFloat(localStorage.width) / page.getViewport({scale : 1}).width);
					    var viewport = page.getViewport({scale : scale});

					    // Prepare canvas using PDF page dimensions
					    var canvas = document.getElementById(id_canvas);
					    var context = canvas.getContext('2d', { alpha: false, antialias: false, depth: false, stencil: false, failIfMajorPerformanceCaveat: false });
					    context.shadowOffsetX = 5;
						context.shadowOffsetY = 5;
						context.shadowBlur = 4;
						context.shadowColor = 'rgba(255, 0, 0, 0.5)';
					    canvas.height = viewport.height;
					    canvas.width = viewport.width;



            			//canvas.addEventListener("touchstart", tapHandler);

					    // Render PDF page into canvas context
					    var renderContext = {
					      canvasContext: context,
					      viewport: viewport
					    };
					    var renderTask = page.render(renderContext);
					    renderTask.promise.then(()=> {
					    	showPage(docu, n, i+1);
					    });
					  });
				}
		}


		async function showPagess(canvas_id, page_no) {
		    PAGE_RENDERING_IN_PROGRESS = 1;
		    _CURRENT_PAGE = page_no;
		    try {
		        var page = await _PDF_DOC.getPage(page_no);
		    }
		    catch(error) {
		        console.log(error.message);
		    }
		    _CANVAS = _$(canvas_id);
		    // original width of the pdf page at scale 1
		    /*var pdf_original_width = page.getViewport(1).width;
		    var scale_required = _CANVAS.width / pdf_original_width;*/

		    //parseFloat(localStorage.width) / page.getViewport(1).width
	        let viewport = page.getViewport({ scale: resolution*(parseFloat(localStorage.width) / page.getViewport(1).width) });
	        _CANVAS.height = viewport.height;
	        _CANVAS.width = viewport.width;

		    let render_context = {
		        canvasContext: _CANVAS.getContext('2d'),
		        viewport: viewport,
		    };
		    try {
		        await page.render(render_context);
		    }
		    catch(error) {
		        console.log(error.message);
		    }
		    _PAGE_RENDERING_IN_PROGRESS = 0;
		}

		function _$$(source, tag){
		    return source.getElementsByTagName(tag);
		}
		function _$(a){
		    return document.getElementById(a);
		}

        var db = openDatabase('comics','1.0','comics',2*1024*1024);
        db.transaction(function(tx){
            tx.executeSql("CREATE TABLE IF NOT EXISTS comic(id INTEGER PRIMARY KEY AUTOINCREMENT, titre VARCHAR, synopsis VARCHAR,auteur VARCHAR,dessinateur VARCHAR,statut VARCHAR,langue VARCHAR,traducteur VARCHAR,miniature VARCHAR)");
            tx.executeSql("CREATE TABLE IF NOT EXISTS chapitres(id INTEGER PRIMARY KEY AUTOINCREMENT, chapitre VARCHAR, lien VARCHAR, comic INTEGER, lu INTEGER DEFAULT 0)");

			if (!localStorage.importer) {
				var chaine = "Webtoon Tuto%%%-%%%Je suis un Webtoon qui sert de tuto. Ma vie est bien triste puisque personne ne m'aime à part mon créateur. Dès que les gens me lisent, ils m'oublient. C'est triste. Ce monde connaîtra donc la souffrance... ma souffrance!%%%-%%%Le créateur%%%-%%%Encore lui%%%-%%%Terminé%%%-%%%FR%%%-%%%Personne%%%-%%%img/splash_back.png\nL'intro%%%-%%%tuto/intro.pdf\nLe début%%%-%%%tuto/debut.pdf\nAprès le début%%%-%%%tuto/fin.pdf\nBonus!%%%-%%%tuto/bonus.pdf";
				set_comic(chaine,"%%%-%%%");
				localStorage.importer = '0';
				
			}

			if (!localStorage.lus) {
				localStorage.lus = '';
			}

        });

        var fichiers = [];

              
            /*var fr = new FileReader();
            fr.onload=function(){
            	//alert();
            	localStorage.importer = '1';
                save_comic(escapeHtml(fr.result), '%%%-%%%');
                _$('inputfile').value = '';
            }*/

            var input = _$('inputfile');
			_$('inputfile').onchange = function(e) {
				fichiers = e.target.files;
				for (var i = 0; i < fichiers.length; i++) {
					var file = fichiers[i];
					if (get_ext(file.name)=='pipi') {
						var reader = new FileReader();
						reader.onload = function(ev) {
			            	localStorage.importer = '1';
			            	//alert(ev.target.result);
			                save_comic(escapeHtml(ev.target.result), '%%%-%%%');
			                _$('inputfile').value = '';
						}
						reader.readAsText(fichiers[i]);
					}
					else {
						notif("Fichier non reconnu ");
					}
				}
				setTimeout("show_all_comics(1, [])", 1500);
			}
              
            /*if (get_ext(this.files[0].name)=='pipi') {fr.readAsText(this.files[0]);}
            else {notif('Fichier non reconnu!')}*/

        function save_comic(strData, strDelimiter) {
            var lignes = strData.split("\n"), n = lignes.length, tab=[];
            //strData = escapeHtml(strData);

            // On recup d'abord les meta-données du comic
            var infos_comic = lignes[0].split(strDelimiter);
            db.transaction(function(tx){
                tx.executeSql("SELECT id,COUNT(*) as cnt FROM comic WHERE (titre=? AND synopsis=? AND auteur=? AND langue=? AND traducteur=?) LIMIT 1", [escapeHtml(infos_comic[0]), escapeHtml(infos_comic[1]), escapeHtml(infos_comic[2]), escapeHtml(infos_comic[5]), escapeHtml(infos_comic[6])], (tx,results)=>{
                	let fnd_id = parseInt(results.rows.item(0).id);
                	let cnter = parseInt(results.rows.item(0).cnt);
                	if (cnter != 0) { 
                		notifier("Mise à jour...");
                		del_comic(fnd_id);

                		let lus = localStorage.lus.split(',');
                		let indexe = lus.findIndex( (valeur) => {return (valeur.split('--%%--')[0] == fnd_id)});
						lus.splice(indexe, 1);
						localStorage.lus = lus.toString();
						show_lus(localStorage.lus.split(','));

                	}
                	set_comic(strData, strDelimiter);
                });
            }, (e)=>{}, ()=>{
                	notif("Ficher importé!");
                	return;
            });
        }

            function retirer_bloc(id) {
                let bloquer = _$(id);
                if (bloquer != undefined) {
                    bloquer.style.animation = "fade .8s forwards";
                    setTimeout(
                        ()=>{
                            set_bar_color("#FEF9C2");
                    }, 350);
                    setTimeout(
                        ()=>{
                            bloquer.remove();
                    }, 800);
                }
            }

            function onLoad() {
                reset_style();
                set_bar_color("#f9ca24");
                document.addEventListener("deviceready", onDeviceReady, false);
                document.addEventListener('admob.interstitial.show', function(){
                	//alert("On ferme la pub");
                   retirer_bloc('lapub');
                   notif(relance[Math.round(Math.random()*(relance.length - 1))]);
                });
                document.addEventListener('admob.interstitial.loadfail', function(){
                	//alert("Problème la pub");
	            	cordova.plugins.codeplayfacebookads.loadInterstitialAds(interstitial_options,interstitiel_events,interstitiel_fail);
                });
                //alert();
            }

            var couche_nav = 0;
            function onBackButton() {
            	switch(couche_nav) {
            		case 0 : navigator.app.exitApp();break;
            		case 1 : navigator.app.exitApp();break;
            		case 2 : down_infos_div(_$('chapitres'),8);break;
            		case 3 : swipe_out(_$('div_pdf_chapitre'),8);break;
            		case 4 : down_infos_div(_$('chapitres'),8);break;
            	}
            }

			async function show_admob_ad(){
				await admob.start();
				let interstitial = new admob.InterstitialAd({
				    adUnitId: 'ca-app-pub-1631866844027753/4707329097',
				});
				await interstitial.load();
				await interstitial.show();
			}

            async function onDeviceReady() {
                document.addEventListener("backbutton", onBackButton, false);
            }

            document.addEventListener('admob.interstitial.dismiss', async () => {
			  await interstitial.load()
			});

        function update__comic(strData, strDelimiter,id) {
            var lignes = strData.split("\n"), n = lignes.length, tab=[];

            db.transaction(function(tx){
            	tx.executeSql("SELECT MAX(id) as maxid FROM comic LIMIT 1", [], function(tx,results){
                    let max_id = results.rows.item(0).maxid;
                    //alert(max_id);
		        	for (let i = 1; i < n; i++) {
		                var comic = {
		                    chapitre:'',
		                    lien:'',
		                }
		                var champs = lignes[i].split(strDelimiter),m = champs.length;
		                comic.chapitre = champs[0];
		                comic.lien = champs[1];
		                tx.executeSql("INSERT INTO chapitres(chapitre,lien,comic) VALUES(?,?,?)", [comic.chapitre, comic.lien, max_id]);
		            }
                });
            });
        }

        function set_comic(strData, strDelimiter) {
            var lignes = strData.split("\n"), n = lignes.length, tab=[];

            // On recup d'abord les meta-données du comic
            var infos_comic = lignes[0].split(strDelimiter);
            db.transaction(function(tx){
                tx.executeSql("INSERT INTO comic(titre,synopsis,auteur,dessinateur,statut,langue,traducteur,miniature) VALUES(?,?,?,?,?,?,?,?)", [escapeHtml(infos_comic[0]), escapeHtml(infos_comic[1]), escapeHtml(infos_comic[2]), escapeHtml(infos_comic[3]), escapeHtml(infos_comic[4]), escapeHtml(infos_comic[5]), escapeHtml(infos_comic[6]), escapeHtml(infos_comic[7])]);
            });

            db.transaction(function(tx){
            	tx.executeSql("SELECT MAX(id) as maxid FROM comic LIMIT 1", [], function(tx,results){
                    let max_id = results.rows.item(0).maxid;
                    //alert(max_id);
		        	for (let i = 1; i < n; i++) {
		                var comic = {
		                    chapitre:'',
		                    lien:'',
		                    lu: 0,
		                }
		                var champs = lignes[i].split(strDelimiter),m = champs.length;
		                comic.chapitre = champs[0];
		                if (chapitres_lus.includes(comic.chapitre)) {comic.lu = 1}
		                comic.lien = champs[1];
		                tx.executeSql("INSERT INTO chapitres(chapitre,lien,comic,lu) VALUES(?,?,?,?)", [escapeHtml(comic.chapitre), escapeHtml(comic.lien), max_id, comic.lu], ()=>{
		                	chapitres_lus = [];
		                });
		            }
                });
            });
        }

        function del_comic(id) {
            db.transaction(function(tx){
            	tx.executeSql("SELECT chapitre FROM chapitres WHERE (comic=? AND lu=1)", [id], (tx, results)=>{
            		let n = results.rows.length;
            		for (var i = 0; i < n; i++) {
            		 	chapitres_lus.push(results.rows.item(i).chapitre);
            		 } 
            	});
            }, (e)=>{}, (tx)=> {
            	console.log(chapitres_lus);
            	db.transaction(function(tx){
	            	tx.executeSql("DELETE FROM comic WHERE id=?", [id], (tx)=>{
	            		tx.executeSql("DELETE FROM chapitres WHERE comic=?", [id], (tx)=>{
	            			if (id==1) {
	            				notif("Moi je t'aimais...");
	            			}
	            		});
	            	});
	            });
            });
        }

        var webtoon_actu = -1;
        function show_comic(id) {
			localStorage.webtoon = id;
			_$('supprimer').setAttribute('onclick','supprimer(this,'+id+')');
			let div_chapitres = _$('chapitres');
        	db.transaction(function(tx){
            	tx.executeSql("SELECT * FROM comic WHERE id=? LIMIT 1", [id], function(tx,results){
                    let titre = results.rows.item(0).titre,
                    	auteur = results.rows.item(0).auteur,
                    	synopsis = results.rows.item(0).synopsis,
                    	dessinateur = results.rows.item(0).dessinateur,
                    	statut = results.rows.item(0).statut,
                    	langue = results.rows.item(0).langue,
                    	traducteur = results.rows.item(0).traducteur,
                    	miniature = results.rows.item(0).miniature
                    ;
                    let tab = [titre,auteur,dessinateur,statut,langue,traducteur,miniature];
		            tx.executeSql("SELECT * FROM chapitres WHERE comic=? ORDER BY id ASC", [id], (tx,results)=>{
		            	let n = results.rows.length, chapitres = '';
		            	for (let i = 0; i < n; i++) {
		            		chapitres += results.rows.item(i).chapitre;
		            		if (i!=(n-1)) {chapitres += ','}
		            	}
						chapitres = chapitres.split(',');
						//chapitres.sort((a, b) => a.localeCompare(b, navigator.languages[0] || navigator.language, {numeric: true, ignorePunctuation: true}));
						let infos_webtoon = _$('infos_webtoon');
						let metas_webtoon = _$('metas_webtoon');
						let sub_metas = _$('sub_metas');

						let tps = 4;
						setTimeout(async ()=>{
							_$$(infos_webtoon,'img')[0].setAttribute('src', miniature);
							_$$(metas_webtoon,'b')[0].innerHTML = unescapeHtml(titre);
							_$$(metas_webtoon,'i')[0].innerHTML = unescapeHtml(synopsis);
							_$$(sub_metas,'b')[0].innerHTML = unescapeHtml(auteur);
							_$$(sub_metas,'b')[1].innerHTML = unescapeHtml(dessinateur);
							_$$(sub_metas,'b')[2].innerHTML = unescapeHtml(statut);
							_$$(sub_metas,'b')[3].innerHTML = unescapeHtml(traducteur);
                    		//console.log(chapitres);
							set_chapters(chapitres, 'chapitres');
            				up_infos_div(div_chapitres, 9);
						},tps*110);
		            });
                });
            },function(error) {},  // handle error if any
    			function() {
        			return;
    			});
        }

            function reset_style(){
                if (!localStorage.height) {
                    localStorage.height = window.innerHeight + 'px';
                    localStorage.width = window.innerWidth;
                    //localStorage.radioswidth = ((window.innerWidth*0.9) - 35) + 'px';
                    // Le 0.9 c'est 90% de la taille du container supérieur "main" et le 35 c'est tous les paddings
                }
                _$('body').style.height = localStorage.height;
                _$('splashscreen').style.height = localStorage.height;
                _$('main').style.height = localStorage.height;
                _$('specials').style.transform = "translate(-50%, "+(parseFloat(localStorage.height) * 0.125)+"px)";
            }

        var ctrl_showed = 0;
		function show_ctrls() {
			let controls = _$('controls'), qualite = _$('qualite'), telecharger = _$('telecharger'), lecture = _$('lecture'), timeur = _$('timeur');
			if (ctrl_showed==0) {
				fade(controls,9,'in');
				fade(qualite,9,'in');
				fade(telecharger,9,'in');
				fade(lecture,9,'in');
				fade(timeur,9,'in');
				ctrl_showed = 1;
			}
			else {
				fade(controls,9,'out');
				fade(qualite,9,'out');
				fade(telecharger,9,'out');
				fade(lecture,9,'out');
				fade(timeur,9,'out');
				ctrl_showed = 0;
			}
		}

		function webtoon_bloc(argument) {
			// body...
		}

        function show_all_comics(filtre, lements) {
        	let divi = _$('liste_comics');
        	divi.innerHTML = '';
        	let req = "", req_elts = [];
        	switch(filtre){
        		case 1: req = "SELECT * FROM comic ORDER BY id DESC";req_elts = lements.slice();break;
        		case 2: req = "SELECT * FROM comic WHERE (titre LIKE '%' || ? || '%') OR (auteur LIKE '%' || ? || '%') OR (dessinateur LIKE '%' || ? || '%')";req_elts = lements.slice();break;
        		case 3: req = "SELECT * FROM comic ORDER BY langue";req_elts = lements.slice();break;
        		case 4: req = "SELECT * FROM comic WHERE (statut LIKE '%' || ? || '%')";req_elts = lements.slice();break;
        		case 5: req = "SELECT * FROM comic ORDER BY traducteur";req_elts = lements.slice();break;
        	}
        	db.transaction(function(tx){
            	tx.executeSql(req, req_elts, function(tx,results){
            		let n = results.rows.length;
                    for (let i = 0; i < n; i++) {
                    	let comics = document.createElement('div');
                    	comics.onclick = ()=>{
                    		show_comic(results.rows.item(i).id);
                    	};
                    	comics.style.animation = "appear .9s "+(i/5)+"s forwards";
                    	comics.innerHTML = "<img src='"+results.rows.item(i).miniature+"'"+"loading='lazy'><span><b>"+unescapeHtml(results.rows.item(i).titre)+"</b><i>De "+unescapeHtml(results.rows.item(i).auteur)+"</i></span>";
                    	divi.appendChild(comics);
                    }
                });
            });
        }

        async function deja_lu(nom_chapitre) {
        	var lu_val;
        	var colorr;
			db.transaction(function(tx){
	            tx.executeSql("SELECT lu FROM chapitres WHERE comic=? AND chapitre=? LIMIT 1", [parseInt(localStorage.webtoon), nom_chapitre], function(tx,results) {
	            	lu_val = results.rows.item(0).lu;
        			if (parseInt(lu_val)==1) {colorr = 'black'}
        			else {colorr = 'silver'}
	            });
	        },function(error) {},  // handle error if any
    			function() {
        			console.log(colorr);
	        		return colorr;
    			});
        }

		function set_chapters(liste, bloc_cible) {
        	var lu_val;
        	var colorr, couleur;
			_$('liste_chapitres').innerHTML = '';
				for (let i = 0; i < liste.length; i++) {
					let span = document.createElement('span');
					db.transaction(function(tx){
			            tx.executeSql("SELECT lu FROM chapitres WHERE comic=? AND chapitre=? LIMIT 1", [parseInt(localStorage.webtoon), liste[i]], function(tx,results) {
			            	lu_val = results.rows.item(0).lu;
		        			if (parseInt(lu_val)==1) {colorr = 'var(--background)'}
		        			else {colorr = 'silver'}
			            });
			        },function(error) {}, function() {
			        	couleur = colorr;
						span.innerHTML = "<b>"+unescapeHtml(liste[i])+"</b>";
						span.setAttribute('id', unescapeHtml(liste[i]));
						span.setAttribute('onclick', "lire_chapitre('"+liste+"','"+liste[i]+"',"+i+")");
			        	span.style.borderLeft = "5px "+couleur+" solid";
						_$('liste_chapitres').appendChild(span);
		    		});
				}
		}

		function escapeHtml(str) {
		    return str.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;");
		}

		function unescapeHtml(str) {
			    var tempDivElement = document.createElement("div");

    // Set the HTML content with the given value
    tempDivElement.innerHTML = str;

    // Retrieve the text property of the element 
    return tempDivElement.textContent || tempDivElement.innerText || "";
		    //return str.replace(/&amp;/g, "&",).replace('&lt;', "<").replace(/&gt;/g, ">").replace(/&quot;/g, "\"").replace(/&#039;/g, "\'");
		      /*var e = document.createElement('div');
			  e.innerHTML = str;
			  return e.childNodes.length === 0 ? "" : e.childNodes[0].nodeValue;*/
		}

		function removeChildren(parent) {
		    while (parent.firstChild) {
		        parent.removeChild(parent.firstChild);
		    }
		}

		function show_ad() {
			/*if (localStorage.importer == '1') {
				bloquer('lapub',2,1);
				show_admob_ad();
			}
			/*if(MoPub) MoPub.prepareInterstitial( {adId:adid.interstitial, autoShow:true} );
			else alert();*/
		}

		async function lire_chapitre(chapitres, nom_chapitre, indice){
			truc_en_cours = 1;
			supprimer_cache();
			reset_cache();
			if (lire) {
				lecture(_$('lecture'));
			}
			setTimeout(()=>{
				if ((webtoon_actu != parseInt(localStorage.webtoon)) || (localStorage.chapitre_actuel != nom_chapitre)) {show_ad();}
				webtoon_actu = parseInt(localStorage.webtoon);
				chapitres = chapitres.split(',');
				let pdf_chapitre = _$('pdf_chapitre');
				if(!lecteur_afficher) {
					swipe_in(_$('div_pdf_chapitre'), 9);
					setTimeout(()=>{
						fade(_$('controls'), 7, 'in');
						fade(_$('qualite'), 7, 'in');
						fade(_$('telecharger'), 7, 'in');
						fade(_$('lecture'), 7, 'in');
						fade(_$('timeur'), 7, 'in');
						setTimeout(()=>{
							fade(_$('controls'), 9, 'out');
							fade(_$('qualite'), 9, 'out');
							fade(_$('telecharger'), 9, 'out');
							fade(_$('lecture'), 9, 'out');
							fade(_$('timeur'), 9, 'out');
						},3500);
					},800);
				}
				bg_image(pdf_chapitre, "url(img/loader.gif)");
				let span_navigation = _$('navigation');

				localStorage.chapitre_actuel = nom_chapitre;
				setTimeout(()=>{
					//localStorage.chapitre_actuel = nom_chapitre;
					notifier(localStorage.chapitre_actuel);
				},1000);
				removeChildren(pdf_chapitre);
				removeChildren(span_navigation);
				pdf_chapitre.innerHTML = "";
				span_navigation.innerHTML = "";
				let precedent = document.createElement('button'), suivant = document.createElement('button');
				precedent.innerHTML = "&laquo;";suivant.innerHTML = "&raquo;";
				suivant.setAttribute('class', 'nav_btn');
				precedent.setAttribute('class', 'nav_btn');

				let suivant_val = 1;
				if (indice == 0) {
					precedent.style.opacity = 0.5;
					precedent.setAttribute('onclick','nothing()');
					if (indice == (chapitres.length - 1)) { suivant_val = 0.5}
						else {suivant_val = 1}
					suivant.style.opacity = suivant_val;
					suivant.setAttribute('onclick', "lire_chapitre('"+chapitres+"','"+chapitres[indice+1]+"',"+(indice+1)+")");;
				}
					else if (indice == (chapitres.length - 1)) {
						precedent.style.opacity = 1;
						precedent.setAttribute('onclick', "lire_chapitre('"+chapitres+"','"+chapitres[indice-1]+"',"+(indice-1)+")");
						suivant.style.opacity = 0.5;
						suivant.setAttribute('onclick', 'nothing()');
					}
						else {
							precedent.style.opacity = 1;
							precedent.setAttribute('onclick', "lire_chapitre('"+chapitres+"','"+chapitres[indice-1]+"',"+(indice-1)+")");
							suivant.style.opacity = 1;
							suivant.setAttribute('onclick', "lire_chapitre('"+chapitres+"','"+chapitres[indice+1]+"',"+(indice+1)+")");
						}
				span_navigation.appendChild(precedent); span_navigation.appendChild(suivant);
				//var chemin = await get_chapter_link();
				db.transaction(function(tx){
		            tx.executeSql("UPDATE chapitres SET lu=1 WHERE comic=? AND chapitre=?", [parseInt(localStorage.webtoon), localStorage.chapitre_actuel]);
		            tx.executeSql("SELECT lien,id FROM chapitres WHERE comic=? AND chapitre=? LIMIT 1", [parseInt(localStorage.webtoon), localStorage.chapitre_actuel], function(tx,results) {
		            	let lienn = results.rows.item(0).lien;
		            	//let id_chapitre = results.rows.item(0).id;
		            	update_lus(localStorage.webtoon, results.rows.item(0).id, localStorage.chapitre_actuel);

						show_lus(localStorage.lus.split(','));

						//console.log('On lit le chapitre donc '+truc_en_cours);
		            	_$('telecharger').addEventListener('click',()=>{
		            		window.open(encodeURI(lienn),"_self");
		            	});
		            	truc_en_cours = 0;
	        			nombre_de_pages(lienn);
		            });
	        	});
			},300);
			
			//let chemin = lien;
			//console.log(chemin);
		}

		function array_firsts(tab, delimiter) {
			let final_arr = [];
			for (var i = 0; i < tab.length; i++) {
				final_arr.push( tab[i].split(delimiter)[0] );
			}
			return final_arr.slice();
		}

		function show_lus(tableau_lus) {
			var tableau_des_lus = tableau_lus.slice();
			let tab_firsts = array_firsts(tableau_des_lus.slice(), '--%%--').slice().toString();
			let tab_seconds = tab_firsts.slice().split(',');
			_$('blocs_lus').innerHTML = "";
			var divi = _$('blocs_lus');
			//console.log(tab_firsts);
		        		//console.log(tableau_des_lus);
			for(let i = (tab_seconds.length - 1); i >= 0; i--) {
                      (async ()=> {
                        //alert("i:"+i);
                        let index = i;
			            //console.log(parseInt(tableau_des_lus[i].split('--%%--')[0]));
					//console.log(parseInt(tab_seconds[index]));

		        	await db.transaction((tx)=>{
			            	tx.executeSql("SELECT * FROM comic WHERE id=?", [parseInt(tab_seconds[index])], async (tx,results)=> {
			            		let n = results.rows.length;
			            		if (n > 0) {
			            		//console.log(n);
			            		//alert(tab_firsts);
			                    	let comics = document.createElement('div');
			                    	var idd = parseInt(results.rows.item(0).id);

			                    	await db.transaction(async (tz)=>{
				                    	await tz.executeSql("SELECT chapitre FROM chapitres WHERE id=? LIMIT 1", [parseInt(tableau_des_lus[index].split('--%%--')[1])], (tz,results)=> {
					                    	//alert('Début');
											let titre_chapitre = results.rows.item(0).chapitre;

					                    	comics.onclick = ()=>{
					                    		show_comic(idd);
					                    		setTimeout(()=>{
					                    			let offtop = _$(''+titre_chapitre+'').offsetTop;
					                    			_$('liste_chapitres').scrollTop = offtop - _$('liste_chapitres').offsetHeight - (_$(''+titre_chapitre+'').offsetHeight * 3);
					                    			_$(''+titre_chapitre+'').style.animation = "zoomzoom 1.7s infinite ease-out";
					                    			console.log(_$(''+titre_chapitre+'').getAttribute('style'));
					                    		}, 2000);
					                    	};
					                    	//alert('Fin');
				                    	});
				                    });

			                    	comics.style.animation = "appear .9s "+(i/5)+"s forwards";
			                    	comics.innerHTML = "<img src='"+results.rows.item(0).miniature+"'"+"loading='lazy'><span><b>"+unescapeHtml(results.rows.item(0).titre)+"</b></span>";
			                    	//tableau_des_lus[i].split('--%%--')[1]
			                    	divi.appendChild(comics);
			            		}
			            		else {
			            			let ii = document.createElement('i');
			            			ii.setAttribute('class','ii');
			            			ii.innerText = "...rien du tout. Vas-y lis un truc... Allez!";
			                    	divi.appendChild(ii);
			            		}

			                });
		            });
                      })();
                  }
        	/*for (var i = (tab_firsts.length - 1); i >= 0; i--) {
        		function show_lu(tableau_des_lus) {
		        	db.transaction(async (tx)=>{
			            	tx.executeSql("SELECT * FROM comic WHERE id=?", [tab_firsts[i]], async (tx,results)=> {
			            		//let n = results.rows.length;
			            		let divi = _$('blocs_lus');
			            		console.log(i);
		        				console.log(tableau_des_lus[2]);
			            		//alert(tab_firsts);
			                    	let comics = document.createElement('div');
			                    	let idd = parseInt(results.rows.item(0).id);
			                    	comics.onclick = ()=>{
			                    		show_comic(idd);
			                    	};
			                    	comics.style.animation = "appear .9s "+(i/5)+"s forwards";
			                    	comics.innerHTML = "<img src='"+results.rows.item(0).miniature+"'"+"loading='lazy'><span><b>"+unescapeHtml(results.rows.item(0).titre)+"</b><i>"+4+"</i></span>";
			                    	//tableau_des_lus[i].split('--%%--')[1]
			                    	divi.appendChild(comics);

			                });
		            });
        		}
        	}*/
		}

		function update_lus(webtoon, chapitre, titre_chap) {
			let lus = [];
			let chaine = webtoon+'--%%--'+chapitre;
			//+'--%%--'+titre_chap+delim
			if (localStorage.lus.length != 0) {
				lus = localStorage.lus.split(',');
				//lus.splice((lus.length-1), 1);
			}
			if ((lus.length < 10)) {
				if (lus.length > 0) {
					let firsts = array_firsts(lus, '--%%--');

					if (firsts.includes(webtoon)) {
						//alert();
						let indexe = lus.findIndex( (valeur) => {return (valeur.split('--%%--')[0] == webtoon)});
						//alert(indexe);
						lus.splice(indexe, 1);
						lus.push(chaine);
						localStorage.lus = lus.toString();
					}
					else {
						lus.push(chaine);
						localStorage.lus = lus.toString();
					}
				}
				else {
					lus.push(chaine);
					localStorage.lus = lus.toString();
				}
			}
			else {
				lus.shift();
				localStorage.lus = lus.toString();
				update_lus(webtoon, chapitre, titre_chap);
			}
		}

		function get_chapter_link() {
			let lien;
			db.transaction(function(tx){
	            tx.executeSql("SELECT lien FROM chapitres WHERE comic=? AND chapitre=? LIMIT 1", [parseInt(localStorage.webtoon), localStorage.chapitre_actuel], function(tx,results) {
	            	lienn = results.rows.item(0).lien;
        			return lienn;
	            });
        	});
		}

		function nothing(argument) {
			// body...
		}

		var infos_affichees = 0;

		function bg_image(elt, img) {
			elt.style.backgroundImage = img;
		}

		function no_ext(fichier, ext) {
			ext = '.'+ext;
			let nom = fichier.replace(ext,'');
			return nom;
		}

		function get_ext(fichier) {
			let ext = fichier.substring(fichier.lastIndexOf(".") + 1);
			return ext;
		}

		function swipe_in(elt, tps) {
			//jouer('whoosh2');
			let choix = Math.round(Math.random());
			if (choix) elt.style.animation = "left_swipe_chapter ."+tps+"s forwards";
			else elt.style.animation = "right_swipe_chapter ."+tps+"s forwards";
			lecteur_afficher = 1;
			down_infos_div(_$('chapitres'), tps);
			couche_nav+=2;
			AndroidFullScreen.immersiveMode(successFunction, errorFunction);
		}


		function successFunction() {
            _$('body').style.height = window.screen.height + 'px';
            _$('main').style.height = window.screen.height + 'px';

			_$('pdf_chapitre').style.height = "100vh";
			_$('div_pdf_chapitre').style.height = "100vh";
		}

		function errorFunction() {
			// body...
		}

		function fade(elt, tps, sens) {
			elt.style.animation = "fade_"+sens+" ."+tps+"s forwards";
		}

		function swipe_out(elt, tps) {
			//jouer('whoosh2');
			reset_style();
			_$('pdf_chapitre').style.height = "100%";
			_$('div_pdf_chapitre').style.height = "100vh";

			truc_en_cours = 1;
			if (lire) {
				clearInterval(lire);
			}
			let choix = Math.round(Math.random());
			if (choix) elt.style.animation = "left_swipe_chapter_out ."+tps+"s forwards ease-out";
			else elt.style.animation = "right_swipe_chapter_out ."+tps+"s forwards ease-out";
			lecteur_afficher = 0;
			alreadys = [];
			down_infos_div(_$('chapitres'), tps);
			couche_nav--;
			AndroidFullScreen.showSystemUI(successsFunction, errorFunction);
		}

		function down_infos_div(divv, tps) {
			//jouer('whoosh3');
			divv.style.animation = "down_info_webtoon ."+tps+"s forwards";
			infos_affichees = 0;
			reset_suppr(_$('supprimer'));
			couche_nav--;
		}

		function up_infos_div(divv, tps) {
			//jouer('whoosh3');
			divv.style.animation = "up_info_webtoon ."+tps+"s forwards";
			infos_affichees = 1;
			couche_nav++;
		}

            function enligne() {
                let ifConnected = window.navigator.onLine;
                if (ifConnected) {
                  return 1;
                } else {
                  return 0;
                }
            }


        var message_pub = ["On reprend juste après!", "Étire un peu tes doigts!", "Apprête-toi déjà pour la suite!", "Petit break...", "On reprend son souffle! (lol)", "La qualité du milieu est aussi très bonne!", "Supprime souvent le cache de l'appli.","Bouton à gauche tout en bas pour télécharger.","Bouton tout en haut à gauche pour la lecture auto.","La qualité HD prend trop de mémoire!", "T'as déjà essayé les filtres?", "Une recherche vide affiche tous les webtoons.", "La recherche c'est par titre, auteur, ou dessinateur"];
		function bloquer(id, choix, pub) {
                let etat = enligne();
                if (etat==0 || pub==1) {
                    let bloquer = _$(id);
                    if (bloquer == undefined) { 
                        let bloquer = document.createElement('div');
                        bloquer.setAttribute('id',id);
                        bloquer.setAttribute('onclick','bloquer('+id+','+choix+',0)');
                        let contenu;
                        switch(choix){
                            case 1 : contenu = "<img src=\"img/no-internet.png\"><b>Hum... T'as un problème de connexion?</b><i>Appuie n'importe où pour réessayer.</i>";break;
                            case 2 : set_bar_color("#e67e22");let indice = Math.round(Math.random()*(message_pub.length-1));contenu = "<img src=\"img/loading.gif\"><b>La Pub!</b><i>"+message_pub[indice]+"</i>";break;
                        }
                        bloquer.innerHTML = contenu;
                        bloquer.style.animation = "appear .8s forwards";
                        _$('body').appendChild(bloquer);
                    }
                }
                else {
                    if (choix != 2) {
                        retirer_bloc(id);
                    }
                }
        }

            function notif(texte){
                let cpy = document.createElement("span");
                cpy.setAttribute('class','notif');
                cpy.innerHTML = texte;
                _$('body').appendChild(cpy);
                //<span class="copied">Link copied</span>
                setTimeout(
                    ()=>{
                        cpy.remove();
                    },
                5000);
                //<span clfass="copied">Link copied</span>
            }

            function notifier(texte){
                let cpy = document.createElement("span");
                cpy.setAttribute('class','notif_up');
                cpy.innerHTML = unescapeHtml(texte);
                _$('body').appendChild(cpy);
            }


			var tapedTwice = false;

			function tapHandler(event) {
			    if(!tapedTwice) {
			        tapedTwice = true;
			        setTimeout( function() { tapedTwice = false; }, 300 );
			        return false;
			    }
			    event.preventDefault();
			    //action on double tap goes below
			    if (this.style.transform == "scale(2)") {
			    	this.style.transform = "scale(1)";
			    }
			    else {
			    	this.style.transform = "scale(2)";
			    }
			 }

			 function supprimer_cache() {
			 	    /*var succes = function(status) {
				        //alert('Message: ' + status);
				    };
				    var erro = function(status) {
				        //alert('Error: ' + status);
				    };
				    window.CacheClear(succes, erro);*/
			 }
			 function reset_cache() {
			 	/*let CordovaClearCache;
				CordovaClearCache.clearCacheAndExternalCache();
				CordovaClearCache.webViewClearCache();
				CordovaClearCache.clearCacheOnly();*/
			 }
    </script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.2.228/pdf.min.js" integrity="sha512-Q0SyiCpjyVOjMJ28RDpmCxi0Drmc9cr7fBQuW2F5F7yiS0yTWtbbltd+H5BYhaA7Izpm6nyIXAUppQfdm6zt1w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</body>
</html>